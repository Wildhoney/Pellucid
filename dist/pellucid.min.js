!function(e,t){"use strict";var n="pellucid-container",i=function(){};i.prototype={options:{blur:"5px"},setOptions:function(e){for(var t in e.attributes)if(e.attributes.hasOwnProperty(t)){var n=e.attributes[t];if(n.name){var i=n.name.toLowerCase().replace(/^data-/i,"");i.match(/^pellucid-/)&&(i=i.replace(/^pellucid-/i,""),this.options[i]=n.nodeValue)}}},removeAllContainers:function(){for(var e=t.querySelectorAll('section[is="'+n+'"]'),i=0,r=e.length;r>i;i++)e[i].remove()},computedParentValue:function(t){var n=e.parent.document.querySelector("html"),i=e.getComputedStyle(n);return i.getPropertyValue(t)},createFrameElement:function(e){var n=t.createElement("iframe");return n.className="pellucid",n.src=t.URL,n.onload=function(){this.frameElementJustify(e,n)}.bind(this),n},frameElementJustify:function(t,n){n||(n=t.querySelector("iframe.pellucid"));var i=function(n){var i=e.getComputedStyle(t)[n];if(t.style.transform){var r=String(t.style.transform).match(/(?:((?:\-)?\d+)px)/g),l="top"===n?1:0;i=parseInt(i)+parseInt(r[l])}return i},r=n.contentWindow,l=isNaN(parseInt(i("top")))?0:parseInt(i("top")),o=isNaN(parseInt(i("left")))?0:parseInt(i("left"));return r.scrollTo(o,l),{left:o,top:l}},createStructureElement:function(e,n){var i=t.createElement("div");return i.className=n,i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top=0,i.style.left=0,e.appendChild(i),i},addFrameElement:function(e,t){t.appendChild(e)},isParent:function(e){return!!e.contentWindow},styleFrameElement:function(e){return this.isParent(e)?void this.styleParentFrameElement(e):(this.styleChildFrameElement(e),void this.removeAllContainers())},styleChildFrameElement:function(n){n=t.querySelector("html"),n.style.height=parseInt(this.computedParentValue("height"))+"px",n.style.width=parseInt(this.computedParentValue("width"))+"px",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.position="absolute",n.style.filter="blur("+this.options.blur+")",n.style.oFilter="blur("+this.options.blur+")",n.style.mozFilter="blur("+this.options.blur+")",n.style.webkitFilter="blur("+this.options.blur+")",e.onmessage=function(e){n.style.height=e.data.height,n.style.width=e.data.width}},styleParentFrameElement:function(e){var t=e.contentWindow,n=t.document.querySelector("html");n.style.width="100%",n.style.height="100%"},addRenderListener:function(n,i){var r=t.querySelector("body");e.onresize=function(){var t=e.getComputedStyle(r);i.contentWindow.postMessage({height:t.getPropertyValue("height"),width:t.getPropertyValue("width")},"*")}.bind(this)},removeContentNodes:function(e){for(var t=[],n=0,i=e.childNodes.length;i>n;n++){var r=e.childNodes[n];t.push(r)}return t.forEach(function(e){e.remove()}),t},reattachContentElements:function(e,t){t.forEach(function(t){e.appendChild(t)})}};var r=Object.create(HTMLDivElement.prototype,{attachedCallback:{value:function(){this.pellucid=new i,this.pellucid.setOptions(this);var e=this.pellucid.createFrameElement(this),t=this.pellucid.removeContentNodes(this),n=this.pellucid.createStructureElement(this,"background"),r=this.pellucid.createStructureElement(this,"content");this.pellucid.reattachContentElements(r,t),this.pellucid.addFrameElement(e,n),this.pellucid.styleFrameElement(e),this.pellucid.isParent(e)&&this.pellucid.addRenderListener(this,e)}}});e.PellucidElement=t.registerElement(n,{prototype:r,"extends":"section"})}(window,window.document);